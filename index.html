<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sertifikasi Gratis</title>
  <style>
    :root {
      --bg-light: #f3f4f6;
      --bg-dark: #121212;
      --card-light: #ffffff;
      --card-dark: #1e1e1e;
      --text-light: #111827;
      --text-dark: #e5e7eb;
      --subtext-light: #6b7280;
      --subtext-dark: #9ca3af;
      --btn-bg: linear-gradient(135deg, #ff6ec4, #7873f5);
      --btn-text: #ffffff;
      --border-light: #e5e7eb;
      --border-dark: #374151;
      --pagination-active: #7873f5;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg-light);
      color: var(--text-light);
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }
    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }
    header {
      padding: 20px;
      text-align: center;
    }
    
    .title-bar {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 20px;
      white-space: nowrap;
      overflow: hidden;
      display: inline-block;
      color: var(--text-light); 
      border-right: .10em solid transparent;
      /* --- PERUBAHAN: Menggunakan animasi baru 'typing-loop' --- */
      animation: typing-loop 6s steps(25, end) infinite, blink-caret .75s step-end infinite;
    }
    body.dark .title-bar {
      color: var(--text-dark); 
    }
    
    /* --- PERUBAHAN: Keyframes baru untuk animasi ketik berulang --- */
    @keyframes typing-loop {
      0%   { width: 0; }
      50%  { width: 100%; } /* Mengetik hingga selesai */
      80%  { width: 100%; } /* Berhenti sejenak */
      100% { width: 0; }    /* Menghapus tulisan */
    }
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: currentColor; } 
    }

    .search-bar {
      display: flex;
      max-width: 400px;
      margin: 0 auto;
      align-items: center;
      background: var(--card-light);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      padding: 5px 15px;
    }
    body.dark .search-bar {
      background: var(--card-dark);
      border-color: var(--border-dark);
    }
    .search-bar input {
      border: none;
      outline: none;
      padding: 8px;
      background: transparent;
      color: inherit;
      flex: 1;
      font-size: 1rem;
    }
    .vendor-filters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }
    .vendor-filters button {
      padding: 8px 16px;
      border: 1px solid var(--border-light);
      color: var(--subtext-light);
      border-radius: 20px;
      cursor: pointer;
      background: var(--card-light);
      transition: all 0.2s;
    }
    body.dark .vendor-filters button {
      background: var(--card-dark);
      border-color: var(--border-dark);
      color: var(--subtext-dark);
    }
    .vendor-filters button:hover {
      transform: translateY(-2px);
    }
    .vendor-filters button.active {
      background: var(--btn-bg);
      color: var(--btn-text);
      border-color: transparent;
      font-weight: bold;
    }
    body.dark .vendor-filters button.active {
      background: var(--btn-bg);
      color: var(--btn-text);
      border-color: transparent;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      padding: 0 20px 20px 20px;
    }
    .card {
      background: var(--card-light);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease-out, box-shadow 0.3s, opacity 0.5s ease-out;
      opacity: 0; 
      transform: translateY(20px); 
    }
    body.dark .card {
      background: var(--card-dark);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    .card.show {
      opacity: 1; 
      transform: translateY(0); 
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    body.dark .card:hover {
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }
    .card-content { flex-grow: 1; }
    .card h3 { margin: 0 0 8px; font-size: 1.2rem; }
    .meta {
      font-size: 0.9rem;
      color: var(--subtext-light);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    body.dark .meta { color: var(--subtext-dark); }
    .meta svg { width: 16px; height: 16px; fill: currentColor; }
    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 20px;
    }
    .level {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      color: var(--subtext-light);
    }
    body.dark .level { color: var(--subtext-dark); }
    .level .star { width: 18px; height: 18px; }
    .level .star.pemula { color: gray; }
    .level .star.menengah { color: gold; }
    .level .star.expert { color: gold; }
    .akses-btn {
      padding: 8px 16px;
      border-radius: 8px;
      background: var(--btn-bg);
      color: var(--btn-text);
      text-decoration: none;
      font-weight: 500;
      transition: transform 0.2s, box-shadow 0.2s;
      font-size: 0.9rem;
      box-shadow: 0 2px 10px rgba(120, 115, 245, 0.3);
    }
    .akses-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(120, 115, 245, 0.5);
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9rem;
      color: var(--subtext-light)
    }
    body.dark footer { color: var(--subtext-dark); }
    .pagination { text-align: center; margin: 20px; }
    .pagination button {
      padding: 8px 12px;
      margin: 0 5px;
      border: 1px solid var(--border-light);
      border-radius: 8px;
      cursor: pointer;
      background: var(--card-light);
      color: var(--text-light);
      transition: all 0.3s;
    }
    body.dark .pagination button {
      background: var(--card-dark);
      border-color: var(--border-dark);
      color: var(--text-dark);
    }
    .pagination button:hover:not(:disabled) {
      background-color: var(--pagination-active);
      color: var(--btn-text);
      border-color: var(--pagination-active);
    }
    .pagination button:disabled { cursor: not-allowed; opacity: 0.5; }
    .pagination span { margin: 0 10px; }
    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      cursor: pointer;
      font-size: 24px;
      background: var(--card-light);
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    body.dark .theme-toggle { background: var(--card-dark); }
  </style>
</head>
<body>
  <header>
    <div class="title-bar">Sertifikasi Gratis</div>
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Cari sertifikasi...">
      <span>üîç</span>
    </div>
    <div class="vendor-filters" id="vendorFilters"></div>
  </header>

  <main>
    <div class="cards" id="cardsContainer"></div>
    <div class="pagination">
      <button id="prevBtn">‚Üê</button>
      <span id="pageInfo"></span>
      <button id="nextBtn">‚Üí</button>
    </div>
  </main>

  <footer>Made with care by seonh_0</footer>
  <div class="theme-toggle" id="themeToggle">üåô</div>

  <script>
    // JavaScript tidak perlu diubah untuk animasi berulang
    const container = document.getElementById("cardsContainer");
    const searchInput = document.getElementById("searchInput");
    const vendorFilters = document.getElementById("vendorFilters");
    const themeToggle = document.getElementById("themeToggle");
    const pageInfoSpan = document.getElementById("pageInfo");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const titleBar = document.querySelector('.title-bar');

    let data = [];
    let currentPage = 1;
    const perPage = 6;
    let currentVendor = "All";

    async function loadData() {
      try {
        const res = await fetch("./certifications.json");
        if (!res.ok) throw new Error("Fetch gagal");
        const json = await res.json();
        data = json.certifications;
      } catch (e) {
        console.error("Gagal fetch JSON, fallback ke data default", e);
        data = [
          { title: "Python for Data Science", vendor: "Kaggle", theme: "Data Science", level: "Pemula", duration: "8 Jam", link: "#" },
          { title: "CS50's Intro to Computer Science", vendor: "Harvard", theme: "Computer Science", level: "Menengah", duration: "50 Jam", link: "#" },
        ];
      }
      renderVendors();
      renderCards();
    }

    function renderVendors() {
      const vendors = ["All", ...new Set(data.map(c => c.vendor))];
      vendorFilters.innerHTML = vendors.map(v =>
        `<button class="${currentVendor === v ? 'active' : ''}" onclick="filterVendor('${v}')">${v}</button>`).join("");
    }

    function filterVendor(vendor) {
      currentVendor = vendor;
      currentPage = 1;
      renderVendors();
      renderCards();
    }

    function renderCards() {
      const searchTerm = searchInput.value.toLowerCase();
      let filtered = data.filter(c =>
        (c.title.toLowerCase().includes(searchTerm) ||
         c.vendor.toLowerCase().includes(searchTerm) ||
         c.theme.toLowerCase().includes(searchTerm)) &&
        (currentVendor === "All" || c.vendor === currentVendor)
      );

      const totalPages = Math.ceil(filtered.length / perPage) || 1;
      if (currentPage > totalPages) currentPage = totalPages;
      const start = (currentPage - 1) * perPage;
      const paginated = filtered.slice(start, start + perPage);

      container.innerHTML = paginated.map((c, index) => `
        <div class="card">
          <div class="card-content">
            <h3>${c.title}</h3>
            <div class="meta">${c.vendor} ¬∑ ${c.theme}</div>
            <div class="meta">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M13 7h-2v5.414l3.293 3.293 1.414-1.414L13 11.586z"></path></svg>
              <span>${c.duration}</span>
            </div>
          </div>
          <div class="card-footer">
            <div class="level">
                ${renderStar(c.level)}
                <span>${c.level}</span>
            </div>
            <a class="akses-btn" href="${c.link}" target="_blank" rel="noopener noreferrer">Akses</a>
          </div>
        </div>
      `).join("");

      pageInfoSpan.textContent = `${currentPage} / ${totalPages}`;
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages;

      setTimeout(() => {
        document.querySelectorAll('.card').forEach(card => card.classList.add('show'));
      }, 50);
    }

    function renderStar(level) {
        const levelClass = level.toLowerCase();
        return `<svg class="star ${levelClass}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>`;
    }

    prevBtn.onclick = () => {
      if (currentPage > 1) { currentPage--; renderCards(); }
    };
    nextBtn.onclick = () => {
      const searchTerm = searchInput.value.toLowerCase();
      let filtered = data.filter(c =>
        (c.title.toLowerCase().includes(searchTerm) || c.vendor.toLowerCase().includes(searchTerm)) &&
        (currentVendor === "All" || c.vendor === currentVendor)
      );
      if (currentPage < Math.ceil(filtered.length / perPage)) { currentPage++; renderCards(); }
    };
    searchInput.addEventListener("input", () => { currentPage = 1; renderCards(); });

    function toggleTheme() {
        const isDark = document.body.classList.toggle("dark");
        themeToggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    themeToggle.addEventListener("click", toggleTheme);

    (function () {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
            document.body.classList.add("dark");
            themeToggle.textContent = "‚òÄÔ∏è";
        } else {
            themeToggle.textContent = "üåô";
        }
    })();

    loadData();
  </script>
</body>
</html>
